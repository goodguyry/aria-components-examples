(()=>{"use strict";function t(t){return Object.keys(t).reduce((function(e,s){return e[s]=".".concat(t[s]),e}),{})}class e{constructor(){this.state={},this.searchString="",this.referenceElements=[],this.setState=this.setState.bind(this),this.getState=this.getState.bind(this),this.setSelfReference=this.setSelfReference.bind(this),this.warnDeprecated=this.warnDeprecated.bind(this)}setState(t){Object.assign(this.state,t),"function"==typeof this.stateWasUpdated&&this.stateWasUpdated()}setSelfReference(t){const e=[...t].map((t=>(Object.defineProperty(t,this.componentName.toLowerCase(),{value:this,configurable:!0}),t)));this.referenceElements=[...this.referenceElements,...e]}deleteSelfReferences(){this.referenceElements.forEach((t=>{delete t[this.componentName.toLowerCase()]}))}getState(){return this.state}warnDeprecated(t,e=!1){const s=e?`Use ${e} instead.`:"";console.warn(`${this.componentName}:`,`${t} is deprecated.`,`${s}`)}}const s=Object.freeze({TAB:9,RETURN:13,ESC:27,SPACE:32,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40});const i=function(t){const e=["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'].join(","),s=t.querySelectorAll(e);return Array.prototype.slice.call(s)};function n(t){if(Array.isArray(t))return t;let e=[];return t instanceof HTMLElement?e=new Array(t):(t instanceof NodeList||t instanceof HTMLCollection)&&(e=Array.prototype.slice.call(t,0)),e}function r(t){(Array.isArray(t)?t:n(t)).forEach((t=>{t.removeAttribute("tabindex")}))}function a(t){(Array.isArray(t)?t:n(t)).forEach((t=>{t.setAttribute("tabindex","-1")}))}function o(t,e){const s=Array.isArray(e)?e:n(e),i=Array.isArray(t)?t:n(t);if(r(s),0<i.length){a(i.filter((t=>!s.includes(t))))}}function h(t){null!==t&&""===t.id&&t.setAttribute("id",function(t=36){const[,e]=Math.random().toString(t).split(".");return`id_${e}`}())}function l(t){const e=n(t),s=e.length-1,{0:i,[s]:r}=e;return[i,r]}class d extends e{constructor(t){super(t),this.componentName="Popup";Object.assign(this,{controller:null,target:null,type:"true",onInit:()=>{},onStateChange:()=>{},onDestroy:()=>{}},t),this.state={expanded:!1},this.init=this.init.bind(this),this.stateWasUpdated=this.stateWasUpdated.bind(this),this.hide=this.hide.bind(this),this.show=this.show.bind(this),this.controllerClickHandler=this.controllerClickHandler.bind(this),this.controllerKeyDownHandler=this.controllerKeyDownHandler.bind(this),this.targetKeyDownHandler=this.targetKeyDownHandler.bind(this),this.hideOnTabOut=this.hideOnTabOut.bind(this),this.hideOnOutsideClick=this.hideOnOutsideClick.bind(this),this.destroy=this.destroy.bind(this),this.controllerIsNotAButton="BUTTON"!==this.controller.nodeName&&null===this.controller.getAttribute("role"),null!==this.controller&&null!==this.target&&this.init()}init(){if(super.setSelfReference([this.controller,this.target]),this.interactiveChildElements=i(this.target),a(this.interactiveChildElements),0<this.interactiveChildElements.length){const[t,e]=l(this.interactiveChildElements);Object.assign(this,{firstInteractiveChild:t,lastInteractiveChild:e})}h(this.target),this.controller.setAttribute("aria-haspopup",this.type),this.controller.setAttribute("aria-expanded","false"),this.controller.setAttribute("aria-controls",this.target.id),h(this.controller),this.controllerIsNotAButton&&(this.controller.setAttribute("role","button"),this.controller.setAttribute("tabindex","0")),this.target!==this.controller.nextElementSibling&&this.controller.setAttribute("aria-owns",this.target.id),this.target.setAttribute("aria-hidden","true"),this.target.setAttribute("hidden",""),this.controller.addEventListener("click",this.controllerClickHandler),this.controller.addEventListener("keydown",this.controllerKeyDownHandler),this.target.addEventListener("keydown",this.targetKeyDownHandler),document.body.addEventListener("click",this.hideOnOutsideClick),this.onInit.call(this)}stateWasUpdated(){const{expanded:t}=this.state;this.controller.setAttribute("aria-expanded",`${t}`),t?(this.target.setAttribute("aria-hidden","false"),this.target.removeAttribute("hidden"),r(this.interactiveChildElements)):(this.target.setAttribute("aria-hidden","true"),this.target.setAttribute("hidden",""),a(this.interactiveChildElements)),this.onStateChange.call(this,this.state)}controllerKeyDownHandler(t){const{expanded:e}=this.state,{ESC:i,TAB:n,SPACE:r,RETURN:a}=s,{keyCode:o}=t;[r,a].includes(o)?this.controllerClickHandler(t):e&&(i===o?(t.preventDefault(),this.hide()):n===o&&(t.preventDefault(),this.firstInteractiveChild.focus()))}targetKeyDownHandler(t){const{ESC:e,TAB:i}=s,{keyCode:n,shiftKey:r}=t,{expanded:a}=this.state,{activeElement:o}=document;e===n&&a?(t.preventDefault(),this.hide(),this.controller.focus()):i===n&&(r?[this.firstInteractiveChild,this.target].includes(o)&&(t.preventDefault(),this.controller.focus()):this.lastInteractiveChild===o&&this.hide())}controllerClickHandler(t){t.preventDefault();const{expanded:e}=this.state;this.setState({expanded:!e})}hideOnTabOut(t){const{expanded:e}=this.state,{TAB:i}=s,{keyCode:n,shiftKey:r}=t;i===n&&!r&&e&&this.hide()}hideOnOutsideClick(t){const{expanded:e}=this.state,{target:s}=t;e&&s!==this.controller&&!this.target.contains(s)&&this.hide()}destroy(){this.deleteSelfReferences(),[this.controller,this.target].forEach((t=>{t.getAttribute("id").includes("id_")&&t.removeAttribute("id")})),this.controller.removeAttribute("aria-haspopup"),this.controller.removeAttribute("aria-expanded"),this.controller.removeAttribute("aria-controls"),this.controller.removeAttribute("aria-owns"),this.controllerIsNotAButton&&(this.controller.removeAttribute("role"),this.controller.removeAttribute("tabindex")),this.target.removeAttribute("aria-hidden"),this.target.removeAttribute("hidden"),r(this.interactiveChildElements),this.controller.removeEventListener("click",this.controllerClickHandler),this.controller.removeEventListener("keydown",this.controllerKeyDownHandler),this.target.removeEventListener("keydown",this.targetKeyDownHandler),document.body.removeEventListener("click",this.hideOnOutsideClick),this.state={expanded:!1},this.onDestroy.call(this)}show(){this.setState({expanded:!0})}hide(){this.setState({expanded:!1})}}class c{constructor(t){switch(this.searchString="",this.clearSearch=null,!0){case Array.isArray(t):this.items=t;break;case t instanceof NodeList:this.items=Array.prototype.slice.call(t,0);break;case null!==t&&"UL"===t.nodeName:this.items=Array.prototype.slice.call(t.children,0);break;default:this.items=null}}getItem(t){if(null!==this.items){const e=String.fromCharCode(t);this.searchString+=e,null!==this.clearSearch&&(clearTimeout(this.clearSearch),this.clearSearch=null),this.clearSearch=setTimeout((()=>{this.searchString="",this.clearSearch=null}),500);const s=this.items.filter((t=>0===t.textContent.toLowerCase().indexOf(this.searchString.toLowerCase())));return s.length?s[0]:null}return null}}class u extends e{constructor(t){super(t),this.componentName="Disclosure";Object.assign(this,{controller:null,target:null,loadOpen:!1,allowOutsideClick:!0,onInit:()=>{},onStateChange:()=>{},onDestroy:()=>{}},t),this.state={expanded:this.loadOpen},this.init=this.init.bind(this),this.destroy=this.destroy.bind(this),this.open=this.open.bind(this),this.close=this.close.bind(this),this.handleControllerKeydown=this.handleControllerKeydown.bind(this),this.toggleExpandedState=this.toggleExpandedState.bind(this),this.closeOnOutsideClick=this.closeOnOutsideClick.bind(this),this.stateWasUpdated=this.stateWasUpdated.bind(this),null!==this.controller&&null!==this.target&&this.init()}init(){super.setSelfReference([this.controller,this.target]);const{expanded:t}=this.state;this.interactiveChildElements=i(this.target),[this.controller,this.target].forEach((t=>{h(t)})),this.controller.setAttribute("aria-expanded",`${t}`),this.controller.setAttribute("aria-controls",this.target.id),"BUTTON"!==this.controller.nodeName&&(this.controller.setAttribute("role","button"),"A"!==this.controller.nodeName&&null===this.controller.getAttribute("tabindex")&&this.controller.setAttribute("tabindex","0")),this.target!==this.controller.nextElementSibling&&this.controller.setAttribute("aria-owns",this.target.id),t||(this.target.setAttribute("aria-hidden","true"),this.target.setAttribute("hidden","")),this.controller.addEventListener("click",this.toggleExpandedState),this.controller.addEventListener("keydown",this.handleControllerKeydown),this.allowOutsideClick||document.body.addEventListener("click",this.closeOnOutsideClick),a(this.interactiveChildElements),this.onInit.call(this)}stateWasUpdated(){const{expanded:t}=this.state;this.controller.setAttribute("aria-expanded",`${t}`),t?(this.target.setAttribute("aria-hidden","false"),this.target.removeAttribute("hidden")):(this.target.setAttribute("aria-hidden","true"),this.target.setAttribute("hidden","")),t?r(this.interactiveChildElements):a(this.interactiveChildElements),this.onStateChange.call(this,this.state)}handleControllerKeydown(t){const{SPACE:e,RETURN:i}=s,{keyCode:n}=t;[e,i].includes(n)&&this.toggleExpandedState(t)}toggleExpandedState(t){t.preventDefault(),this.state.expanded?this.close():this.open()}closeOnOutsideClick(t){this.state.expanded&&t.target!==this.controller&&!this.target.contains(t.target)&&this.close()}destroy(){this.deleteSelfReferences(),[this.controller,this.target].forEach((t=>{t.getAttribute("id").includes("id_")&&t.removeAttribute("id")})),this.controller.removeAttribute("aria-expanded"),this.controller.removeAttribute("aria-controls"),this.controller.removeAttribute("aria-owns"),this.controller.removeAttribute("tabindex"),"BUTTON"!==this.controller.nodeName&&this.controller.removeAttribute("role"),this.target.removeAttribute("aria-hidden"),this.target.removeAttribute("hidden"),r(this.interactiveChildElements),this.controller.removeEventListener("click",this.toggleExpandedState),this.controller.removeEventListener("keydown",this.handleControllerKeydown),document.body.removeEventListener("click",this.closeOnOutsideClick),this.state={expanded:this.loadOpen},this.onDestroy.call(this)}open(){this.setState({expanded:!0})}close(){this.setState({expanded:!1})}}function p(t,e){return null!=t&&t instanceof e}function b(t,e,s,i){const{next:n,previous:r}=i,a=s.indexOf(e),o=s.length-1;let h=t===r?a-1:a+1;return r===t&&0>h&&(h=o),n===t&&o<h&&(h=0),s[h]}function m(t,e,i){const{LEFT:n,RIGHT:r}=s;return b(t,e,i,{previous:n,next:r})}class g extends e{static nextElementIsUl(t){const e=t.nextElementSibling;return null!==e&&"UL"===e.nodeName&&e}constructor(t){if(super(t),this.componentName="Menu",t.menu){const{menu:e}=t;Object.assign(t,{list:e,menu:void 0}),this.warnDeprecated("config.menu","config.list")}Object.assign(this,{list:null,collapse:!1,onInit:()=>{},onDestroy:()=>{}},t),this.handleListKeydown=this.handleListKeydown.bind(this),this.destroy=this.destroy.bind(this),null!==this.list&&"UL"===this.list.nodeName&&this.init()}init(){super.setSelfReference([this.list]),this.list.setAttribute("role","menu"),this.listItems=Array.prototype.slice.call(this.list.children),this.menuItems=this.listItems.reduce(((t,e)=>{const s=e.firstElementChild;return null!==s&&"A"===s.nodeName?[...t,s]:t}),[]),this.search=new c(this.menuItems),this.menuItemsLength=this.menuItems.length,this.list.addEventListener("keydown",this.handleListKeydown),this.disclosures=[],this.menuItems.forEach(((t,e)=>{t.parentElement.setAttribute("role","presentation"),t.setAttribute("role","menuitem"),t.setAttribute("aria-setsize",this.menuItemsLength),t.setAttribute("aria-posinset",e+1);const s=this.constructor.nextElementIsUl(t);if(s){if(this.collapse){const e=new u({controller:t,target:s});this.disclosures.push(e)}new g({list:s}).previousSibling=t}}));const[t,e]=l(this.menuItems);Object.assign(this,{firstItem:t,lastItem:e}),this.onInit.call(this)}handleListKeydown(t){const{keyCode:e}=t,{UP:i,DOWN:n,LEFT:r,RIGHT:a,HOME:o,END:h,ESC:l}=s,{activeElement:d}=document,c=this.list.contains(d)?d:this.menuItems[0];switch(e){case i:case n:{const i=function(t,e,i){const{UP:n,DOWN:r}=s;return b(t,e,i,{previous:n,next:r})}(e,c,this.menuItems);i&&(t.stopPropagation(),t.preventDefault(),i.focus());break}case o:t.preventDefault(),this.firstItem.focus();break;case h:t.preventDefault(),this.lastItem.focus();break;case a:{const e=this.constructor.nextElementIsUl(c);if(e&&p(e.menu,g)){t.stopPropagation(),t.preventDefault(),p(c.disclosure,u)&&c.disclosure.open();const{menu:s}=e;s.firstItem.focus()}break}case r:void 0===this.previousSibling||this.previousSibling.hasAttribute("aria-haspopup")||(t.preventDefault(),t.stopPropagation(),p(this.previousSibling.disclosure,u)&&this.previousSibling.disclosure.close(),this.previousSibling.focus());break;case l:break;default:{t.stopPropagation();const s=this.search.getItem(e);null!==s&&s.focus();break}}}destroy(){this.deleteSelfReferences(),this.list.removeAttribute("role"),this.list.removeEventListener("keydown",this.handleListKeydown),this.menuItems.forEach((t=>{t.parentElement.removeAttribute("role"),t.removeAttribute("role"),t.removeAttribute("aria-setsize"),t.removeAttribute("aria-posinset");const e=this.constructor.nextElementIsUl(t);e&&p(e.menu,g)&&e.menu.destroy()})),this.disclosures.forEach((t=>{t.destroy()})),this.onDestroy.call(this)}}class v extends e{static createCloseButton(){const t=document.createElement("button");return t.innerText="Close",t}constructor(t){super(t),this.componentName="Dialog";const e={controller:null,target:null,content:null,close:this.constructor.createCloseButton(),onInit:()=>{},onStateChange:()=>{},onDestroy:()=>{}};Object.assign(this,e,t),void 0===t.close&&null!==this.target&&this.target.insertBefore(this.close,this.target.firstChild),this.onPopupStateChange=this.onPopupStateChange.bind(this),this.handleTargetKeydown=this.handleTargetKeydown.bind(this),this.handleKeydownEsc=this.handleKeydownEsc.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.destroy=this.destroy.bind(this),this.stateWasUpdated=this.stateWasUpdated.bind(this),null===this.controller||null===this.target||null===this.content||this.content.contains(this.target)||this.init()}init(){super.setSelfReference([this.controller,this.target]),this.popup=new d({controller:this.controller,target:this.target,type:"dialog",onStateChange:this.onPopupStateChange}),this.interactiveChildElements=i(this.target),this.close.addEventListener("click",this.hide),this.target.addEventListener("keydown",this.handleTargetKeydown),this.popup.target.removeEventListener("keydown",this.popup.targetKeyDownHandler),this.state={expanded:!1},this.onInit.call(this)}onPopupStateChange({expanded:t}){this.setState({expanded:t})}stateWasUpdated(){const{expanded:t}=this.state;this.interactiveChildElements=i(this.target),t?(this.content.setAttribute("aria-hidden","true"),this.content.setAttribute("hidden",""),document.body.addEventListener("keydown",this.handleKeydownEsc),this.close.focus()):(this.content.setAttribute("aria-hidden","false"),this.content.removeAttribute("hidden"),document.body.removeEventListener("keydown",this.handleKeydownEsc),this.controller.focus()),this.onStateChange.call(this,this.state)}outsideClick(t){const{expanded:e}=this.state;e&&!this.target.contains(t.target)&&this.hide()}handleTargetKeydown(t){const{TAB:e}=s,{keyCode:i,shiftKey:n}=t,{expanded:r}=this.state;if(r&&i===e){const{activeElement:e}=document,[s,i]=l(this.interactiveChildElements);n&&s===e?(t.preventDefault(),i.focus()):n||i!==e||(t.preventDefault(),s.focus())}}handleKeydownEsc(t){const{ESC:e}=s,{keyCode:i}=t;e===i&&this.hide()}destroy(){this.deleteSelfReferences(),this.popup.destroy(),this.content.removeAttribute("aria-hidden"),this.close.removeEventListener("click",this.hide),this.target.removeEventListener("keydown",this.handleTargetKeydown),document.body.removeEventListener("keydown",this.handleKeydownEsc),this.onDestroy.call(this)}show(){this.popup.show()}hide(){this.popup.hide()}}class y extends e{constructor(t){if(super(),this.componentName="Tablist",t.tablist){const{tablist:e}=t;Object.assign(t,{tabs:e,tablist:void 0}),this.warnDeprecated("config.tablist","config.tabs")}if("UL"!==t.tabs.nodeName)return void console.warn("Tablist requires a <ul> for the tabs.");Object.assign(this,{list:null,panels:null,onInit:()=>{},onStateChange:()=>{},onDestroy:()=>{}},t),this.state={activeIndex:0},this.handlePanelKeydown=this.handlePanelKeydown.bind(this),this.handleTabsKeydown=this.handleTabsKeydown.bind(this),this.handleTabsClick=this.handleTabsClick.bind(this),this.switchTo=this.switchTo.bind(this),this.destroy=this.destroy.bind(this),this.stateWasUpdated=this.stateWasUpdated.bind(this),Array.isArray(this.panels)||(this.panels=Array.prototype.slice.call(this.panels)),this.tabLinks=Array.prototype.filter.call(this.tabs.children,(t=>null!==t.querySelector("a[href]"))).map((t=>t.querySelector("a[href]"))),this.tabLinks.length===this.panels.length&&this.init()}init(){const{activeIndex:t}=this.state;this.tabs.setAttribute("role","tablist"),Array.prototype.forEach.call(this.tabs.children,(t=>{"LI"===t.nodeName&&t.setAttribute("role","presentation")})),this.tabLinks.forEach(((e,s)=>{super.setSelfReference([e]),h(e),e.setAttribute("role","tab"),t!==s?e.setAttribute("tabindex","-1"):e.setAttribute("aria-selected","true"),e.setAttribute("aria-controls",this.panels[s].id)})),this.tabs.addEventListener("click",this.handleTabsClick),this.tabs.addEventListener("keydown",this.handleTabsKeydown),this.panels.forEach(((e,s)=>{super.setSelfReference([e]),h(e),e.setAttribute("role","tabpanel"),e.setAttribute("aria-labelledby",this.tabLinks[s].id),t===s?(e.setAttribute("tabindex","0"),e.setAttribute("aria-hidden","false"),e.removeAttribute("hidden")):(e.setAttribute("aria-hidden","true"),e.setAttribute("hidden","")),e.addEventListener("keydown",this.handlePanelKeydown)})),this.interactiveChildElements=i(this.panels[t]),this.onInit.call(this)}stateWasUpdated(){const{activeIndex:t}=this.state,[e]=this.tabLinks.filter((t=>"true"===t.getAttribute("aria-selected"))),s=this.tabLinks.indexOf(e);e.setAttribute("tabindex","-1"),e.removeAttribute("aria-selected"),this.panels[s].setAttribute("aria-hidden","true"),this.panels[s].setAttribute("hidden",""),this.panels[s].removeAttribute("tabindex");a(i(this.panels[s])),this.tabLinks[t].removeAttribute("tabindex"),this.tabLinks[t].setAttribute("aria-selected","true"),this.panels[t].setAttribute("aria-hidden","false"),this.panels[t].removeAttribute("hidden"),this.panels[t].setAttribute("tabindex","0"),this.interactiveChildElements=i(this.panels[t]),r(this.interactiveChildElements),this.onStateChange.call(this,this.state)}handlePanelKeydown(t){const{TAB:e}=s,{activeIndex:i}=this.state,{keyCode:n,shiftKey:r}=t,{activeElement:a}=document,[o]=this.interactiveChildElements;n===e&&r&&(a===this.panels[i]?(t.preventDefault(),this.tabLinks[i].focus()):a===o&&(t.preventDefault(),this.panels[i].focus()))}handleTabsKeydown(t){const{TAB:e,LEFT:i,RIGHT:n,DOWN:r,HOME:a,END:o}=s,{keyCode:h,shiftKey:l,target:d}=t,c=this.tabLinks.indexOf(d);switch(h){case e:l||(t.preventDefault(),this.panels[c].focus());break;case i:case n:{const e=m(h,d,this.tabLinks);e&&(t.preventDefault(),this.switchTo(this.tabLinks.indexOf(e)),e.focus());break}case r:t.preventDefault(),this.panels[c].setAttribute("tabindex","0"),this.panels[c].focus();break;case a:t.preventDefault(),this.switchTo(0),this.tabLinks[0].focus();break;case o:{t.preventDefault();const e=this.tabLinks.length-1;this.switchTo(e),this.tabLinks[e].focus();break}}}handleTabsClick(t){const{target:e}=t;t.preventDefault(),"true"!==e.getAttribute("aria-selected")&&this.tabLinks.includes(e)&&this.switchTo(this.tabLinks.indexOf(e))}switchTo(t){this.setState({activeIndex:t})}destroy(){this.tabs.removeAttribute("role"),Array.prototype.forEach.call(this.tabs.children,(t=>{"LI"===t.nodeName&&t.removeAttribute("role")})),this.deleteSelfReferences(),this.tabLinks.forEach((t=>{t.removeAttribute("role"),t.removeAttribute("aria-selected"),t.removeAttribute("tabindex"),t.removeAttribute("aria-controls"),t.removeEventListener("click",this.handleTabsClick),t.removeEventListener("keydown",this.handleTabsKeydown)})),this.panels.forEach((t=>{t.removeAttribute("role"),t.removeAttribute("aria-hidden"),t.removeAttribute("hidden"),t.removeAttribute("tabindex"),t.removeAttribute("aria-labelledby");r(i(t)),t.removeEventListener("keydown",this.handlePanelKeydown)})),this.onDestroy.call(this)}}var f=t(siteClassNames.popup),w=f.button,A=f.info,E=document.querySelector(w),C=document.querySelector(A),S=(new d({controller:E,target:C}),t(siteClassNames.tablist)),k=S.list,I=S.panel,x=document.querySelector(k),L=document.querySelectorAll(I),D=new y({tabs:x,panels:L});function O(){var t=window.location.hash.replace("#",""),e=document.getElementById(t);if(null!==e&&e.tablist instanceof y){var s=D.panels.indexOf(e);-1<s&&(D.switchTo(s),e.scrollIntoView({behavior:"smooth"}))}}window.addEventListener("load",O),window.addEventListener("hashchange",O);var T=t(siteClassNames.listbox),K=T.button,N=T.list,B=document.querySelector(K),U=document.querySelector(N),P=(new class extends e{constructor(t){super(t),this.componentName="ListBox";Object.assign(this,{controller:null,target:null,onInit:()=>{},onStateChange:()=>{},onDestroy:()=>{}},t),this.preventWindowScroll=this.preventWindowScroll.bind(this),this.handleControllerKeyup=this.handleControllerKeyup.bind(this),this.handleTargetKeydown=this.handleTargetKeydown.bind(this),this.handleTargetClicks=this.handleTargetClicks.bind(this),this.handleTargetBlur=this.handleTargetBlur.bind(this),this.scrollOptionIntoView=this.scrollOptionIntoView.bind(this),this.onPopupStateChange=this.onPopupStateChange.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.destroy=this.destroy.bind(this),this.stateWasUpdated=this.stateWasUpdated.bind(this),this.init()}init(){super.setSelfReference([this.controller,this.target]),this.options=Array.prototype.slice.call(this.target.children,0),this.search=new c(this.options),this.options.forEach((t=>{h(t),t.setAttribute("role","option")}));const[t,e]=l(this.options);Object.assign(this,{firstOption:t,lastOption:e}),this.state={activeDescendant:this.firstOption},this.popup=new d({controller:this.controller,target:this.target,type:"listbox",onStateChange:this.onPopupStateChange}),this.target.setAttribute("role","listbox"),this.target.setAttribute("tabindex","-1"),this.controller.addEventListener("keydown",this.handleControllerKeyup),this.target.addEventListener("keydown",this.handleTargetKeydown),this.target.addEventListener("click",this.handleTargetClicks),this.target.addEventListener("blur",this.handleTargetBlur),window.addEventListener("keydown",this.preventWindowScroll),this.onInit.call(this)}stateWasUpdated(){const{activeDescendant:t,expanded:e}=this.state;if(e){const e=this.target.querySelector('[aria-selected="true"]');null!==e&&e.removeAttribute("aria-selected"),t.setAttribute("aria-selected","true"),this.target.setAttribute("aria-activedescendant",t.id),this.scrollOptionIntoView(t)}this.onStateChange.call(this,this.state)}onPopupStateChange({expanded:t}){const{activeDescendant:e}=this.state;t?this.target.focus():(this.target.removeAttribute("aria-activedescendant"),this.controller.textContent=e.textContent,this.target.contains(document.activeElement)&&this.controller.focus()),this.setState({activeDescendant:e,expanded:t})}preventWindowScroll(t){const{UP:e,DOWN:i}=s,{target:n,keyCode:r}=t;n===this.target&&[e,i].includes(r)&&t.preventDefault()}handleControllerKeyup(t){const{UP:e,DOWN:i}=s;[e,i].includes(t.keyCode)&&(t.preventDefault(),this.show())}handleTargetKeydown(t){const{activeDescendant:e}=this.state,{keyCode:i}=t,{RETURN:n,ESC:r,UP:a,DOWN:o,SPACE:h,HOME:l,END:d}=s;switch(i){case r:case n:case h:t.preventDefault(),this.hide(),this.controller.focus();break;case a:case o:{let s=e;s=i===a?s.previousElementSibling:s.nextElementSibling,s&&(t.preventDefault(),this.setState({activeDescendant:s}));break}case l:t.preventDefault(),this.setState({activeDescendant:this.firstOption});break;case d:t.preventDefault(),this.setState({activeDescendant:this.lastOption});break;default:{const t=this.search.getItem(i);null!==t&&this.setState({activeDescendant:t});break}}}handleTargetClicks(t){this.setState({activeDescendant:t.target}),this.hide()}handleTargetBlur(){this.popup.getState().expanded&&this.hide()}scrollOptionIntoView(t){const{scrollHeight:e,clientHeight:s,scrollTop:i}=this.target,{offsetTop:n,offsetHeight:r}=t;if(e>s){const t=n+r;t>s+i?this.target.scrollTop=t-s:n<i&&(this.target.scrollTop=n)}}destroy(){this.deleteSelfReferences(),this.options.forEach((t=>{t.removeAttribute("role"),t.removeAttribute("aria-selected"),t.getAttribute("id").includes("id_")&&t.removeAttribute("id")})),this.popup.destroy(),this.target.removeAttribute("role"),this.target.removeAttribute("tabindex"),this.target.removeAttribute("aria-activedescendant"),this.controller.removeEventListener("keyup",this.handleControllerKeyup),this.target.removeEventListener("keydown",this.handleTargetKeydown),this.target.removeEventListener("click",this.handleTargetClicks),this.target.removeEventListener("blur",this.handleTargetBlur),window.removeEventListener("keydown",this.preventWindowScroll),this.onDestroy.call(this)}show(){this.popup.show()}hide(){this.popup.hide()}}({controller:B,target:U}),t(siteClassNames.menu).list),R=document.querySelector(P),M=(new g({list:R}),t(siteClassNames.dialog)),W=M.link,H=M.closeButton;window.addEventListener("load",(function(){var t=document.querySelector(W),e=document.getElementById("dialog"),s=document.querySelector(H),i=document.querySelector(".site");new v({controller:t,target:e,close:s,content:i})}));var j=t(siteClassNames.menubar).list,q=document.querySelector(j),$=(new class extends e{static getPopupFromMenubarItem(t){return!!p(t.popup,d)&&t.popup}constructor(t){super(t),this.componentName="MenuBar",Object.keys(t).forEach((e=>{if("menu"===e){const{menu:e}=t;Object.assign(t,{list:e,menu:void 0}),this.warnDeprecated("config.menu","config.list")}["onPopupDestroy","onPopupStateChange"].includes(e)&&this.warnDeprecated(`config.${e}`)}));Object.assign(this,{list:null,onInit:()=>{},onStateChange:()=>{},onDestroy:()=>{},onPopupInit:()=>{}},t),this.handleMenuBarKeydown=this.handleMenuBarKeydown.bind(this),this.handleMenuBarClick=this.handleMenuBarClick.bind(this),this.handleMenuItemKeydown=this.handleMenuItemKeydown.bind(this),this.stateWasUpdated=this.stateWasUpdated.bind(this),this.destroy=this.destroy.bind(this),null!==this.list&&"UL"===this.list.nodeName&&this.init()}init(){super.setSelfReference([this.list]),this.list.setAttribute("role","menubar"),this.menuBarChildren=Array.prototype.slice.call(this.list.children),this.menuBarItems=this.menuBarChildren.reduce(((t,e)=>{const s=e.firstElementChild;return null!==s&&"A"===s.nodeName?[...t,s]:t}),[]),this.search=new c(this.menuBarItems),this.menuLength=this.menuBarItems.length,this.menuBarItems.forEach(((t,e)=>{t.setAttribute("role","menuitem"),t.setAttribute("aria-setsize",this.menuLength),t.setAttribute("aria-posinset",e+1),t.parentElement.setAttribute("role","presentation"),t.parentElement.addEventListener("keydown",this.handleMenuBarKeydown),t.addEventListener("click",this.handleMenuBarClick)}));const[t,e]=l(this.menuBarItems);Object.assign(this,{firstItem:t,lastItem:e}),this.clickEvent=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});const{popups:s,subMenus:i}=this.menuBarItems.reduce(((t,e)=>{const s=e.nextElementSibling;if(null===s)return t;const i=new d({controller:e,target:s,onInit:this.onPopupInit,type:"menu"});t.popups.push(i);const n="UL"===s.nodeName?s:s.querySelector("ul");if(null===n)return t;const r=new g({list:n});return s.addEventListener("keydown",this.handleMenuItemKeydown),r.previousSibling=e,t.subMenus.push(r),t}),{popups:[],subMenus:[]});Object.assign(this,{popups:s,subMenus:i}),this.state={menubarItem:this.firstItem,popup:this.constructor.getPopupFromMenubarItem(this.firstItem),expanded:!1},o(this.menuBarItems,this.firstItem),this.onInit.call(this)}stateWasUpdated(){const{menubarItem:t}=this.state;o(this.menuBarItems,t),t.focus(),this.onStateChange.call(this,this.state)}handleMenuBarKeydown(t){const{LEFT:e,RIGHT:i,DOWN:n,HOME:r,END:a,SPACE:o,RETURN:h}=s,{keyCode:l}=t,{menubarItem:d}=this.state,c=this.constructor.getPopupFromMenubarItem(d);switch(l){case e:case i:{const e=m(l,d,this.menuBarItems);e&&(t.stopPropagation(),t.preventDefault(),c&&c.hide(),this.setState({menubarItem:e}));break}case o:case h:case n:c&&(t.stopPropagation(),t.preventDefault(),c.state.expanded||c.show(),c.firstInteractiveChild.focus());break;case r:{t.preventDefault();const[e]=this.menuBarItems;this.setState({menubarItem:e});break}case a:t.preventDefault(),this.setState({menubarItem:this.lastItem});break;default:{const t=this.search.getItem(l);null!==t&&this.setState({menubarItem:t});break}}}handleMenuBarClick(t){this.setState({menubarItem:t.target})}handleMenuItemKeydown(t){const{SPACE:e,RETURN:i}=s,{keyCode:n,target:r}=t;[e,i].includes(n)&&"A"===r.nodeName&&(t.stopPropagation(),t.preventDefault(),r.dispatchEvent(this.clickEvent))}destroy(){this.deleteSelfReferences(),this.list.removeAttribute("role"),this.menuBarItems.forEach((t=>{t.parentElement.removeAttribute("role"),t.removeAttribute("aria-setsize"),t.removeAttribute("aria-posinset"),t.removeAttribute("role"),t.parentElement.removeEventListener("keydown",this.handleMenuBarKeydown),t.removeEventListener("click",this.handleMenuBarClick)})),r(this.menuBarItems),this.popups.forEach((t=>{t.target.removeEventListener("keydown",this.handleMenuItemKeydown),t.destroy()})),this.subMenus.forEach((t=>{t.destroy()})),this.onDestroy.call(this)}}({list:q}),t(siteClassNames.menubutton)),F=$.button,V=$["menu-wrapper"],z=$.menu,G=document.querySelector(F),_=document.querySelector(V),J=document.querySelector(z),Q=(new class extends e{constructor(t){super(t),this.componentName="MenuButton";Object.assign(this,{controller:null,target:null,list:null,onInit:()=>{},onStateChange:()=>{},onDestroy:()=>{}},t),this.handleControllerKeydown=this.handleControllerKeydown.bind(this),this.onPopupStateChange=this.onPopupStateChange.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.destroy=this.destroy.bind(this),null!==this.controller&&null!==this.target&&this.init()}init(){this.popup=new d({controller:this.controller,target:this.target,type:"menu",onStateChange:this.onPopupStateChange}),null!==this.list&&"UL"===this.list.nodeName?this.menu=new g({list:this.list}):"UL"===this.target.nodeName&&(this.menu=new g({list:this.target})),this.controller.addEventListener("keydown",this.handleControllerKeydown),this.state={expanded:!1},this.onInit.call(this)}onPopupStateChange(t){this.setState(t),this.onStateChange.call(this,this.state)}handleControllerKeydown(t){const{keyCode:e}=t,{RETURN:i,UP:n,DOWN:r,SPACE:a}=s;switch(e){case i:case a:case r:t.preventDefault(),this.show(),this.menu.firstItem&&this.menu.firstItem.focus();break;case n:t.preventDefault(),this.show(),this.menu.lastItem&&this.menu.lastItem.focus()}}destroy(){this.popup.destroy(),this.menu.destroy(),this.controller.removeEventListener("keydown",this.handleControllerKeydown),this.onDestroy.call(this)}show(){this.popup.show()}hide(){this.popup.hide()}}({controller:G,target:_,list:J}),t(siteClassNames.disclosure)),X=Q.button,Y=Q.info,Z=document.querySelectorAll(X),tt=document.querySelectorAll(Y);if(Z.length===tt.length)Array.prototype.map.call(Z,(function(t,e){return new u({controller:t,target:tt[e]})}));function et(){var t=window.location.hash.replace("#",""),e=document.getElementById(t);if(null!==e&&e.disclosure instanceof u){var s=e.disclosure;s.open(),s.controller.scrollIntoView({behavior:"smooth"})}}window.addEventListener("load",et),window.addEventListener("hashchange",et)})();